<div class="container-fluid mt-4">
  <div class="card shadow-sm border-0">
    
    <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
      <h4 class="m-0 text-primary fw-bold">
        <i class="bi bi-box-seam me-2"></i>Inventory List
      </h4>
      <button class="btn btn-primary rounded-pill px-4 shadow-sm" (click)="addProduct()">
        <i class="bi bi-plus-circle me-2"></i>Add Product
      </button>
    </div>

    <div class="card-body p-0">
        <p-table 
        [value]="(products | async) || []" 
        [paginator]="true" 
        [rows]="5" 
        [rowsPerPageOptions]="[5, 10, 20]"
        [tableStyle]="{ 'min-width': '50rem' }"
        styleClass="p-datatable-striped p-datatable-sm"
        responsiveLayout="scroll">

        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                <th pSortableColumn="sku">SKU <p-sortIcon field="sku"></p-sortIcon></th>
                <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
                <th pSortableColumn="reorder_level">Reorder Level <p-sortIcon field="reorder_level"></p-sortIcon></th>
                <th class="text-center">Actions</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-product>
          <tr class="align-middle">
            <td class="fw-bold text-dark">{{ product.name }}</td>
            <td><span class="badge bg-light text-dark border">{{ product.sku }}</span></td>
            
            <td class="text-success fw-bold">{{ product.price | currency:'USD' }}</td>
            
            <td>
              <span [ngClass]="{'text-danger fw-bold': product.reorder_level < 10, 'text-muted': product.reorder_level >= 10}">
                {{ product.reorder_level }} units
              </span>
            </td>

            <td class="text-center">
              <div class="btn-group" role="group">
                <button 
                    class="btn btn-outline-primary btn-sm rounded-start" 
                    (click)="editProduct(product)" 
                    title="Edit">
                    <i class="bi bi-pencil-square"></i>
                </button>
                <button 
                    class="btn btn-outline-danger btn-sm rounded-end" 
                    (click)="deleteProduct(product)" 
                    title="Delete">
                    <i class="bi bi-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5" class="text-center py-4 text-muted">
                    <i class="bi bi-inbox fs-1 d-block mb-2"></i>
                    No products found. Click "Add Product" to begin.
                </td>
            </tr>
        </ng-template>

      </p-table>
    </div>
  </div>
</div>